{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'login_view',\n  data() {\n    return {\n      email: null,\n      password: null,\n      message: \"\"\n    };\n  },\n  methods: {\n    handleLogin() {\n      axios.post('http://127.0.0.1:5000/api/login', {\n        email: this.email,\n        password: this.password\n      }).then(response => {\n        console.log(\"response block\", response);\n        if (response.status == 201) {\n          this.var12 = response.data;\n          this.email = null;\n          this.password = null;\n          this.roles = response.data.roles;\n          localStorage.setItem('authToken', response.data.authToken);\n          localStorage.setItem('roles', response.data.roles);\n          localStorage.setItem('user_id', response.data.user_id);\n          if (this.roles == 'sponsor') {\n            this.$router.push('/sponsor_home');\n          } else if (this.roles == 'influencer') {\n            this.$router.push('/influencer_home');\n          } else {\n            this.$router.push('/admin_home');\n          }\n        }\n      }).catch(error => {\n        console.log(\"error block\", error);\n        if (error.response && error.response.status >= 400) {\n          this.message = error.response.data.message;\n          // Refresh the page after a short delay\n          setTimeout(() => {\n            location.reload();\n          }, 2000);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","email","password","message","methods","handleLogin","post","then","response","console","log","status","var12","roles","localStorage","setItem","authToken","user_id","$router","push","catch","error","setTimeout","location","reload"],"sources":["/Users/meena/Documents/learning/annamalai/Azure Test App/Collaboration-Hub-Web-Application/frontend/src/components/login_view.vue"],"sourcesContent":["<template>\r\n\r\n<br>\r\n<br>\r\n\r\n<div class=\"col-md-4 mx-auto\">\r\n\r\n\r\n    <div class=\"container h-100\" >\r\n        <div class=\"row justify-content-center\">\r\n            <h2>Login</h2>\r\n            <br>\r\n            <form >\r\n                <div class=\"mb-3\">\r\n                <label for=\"username\" class=\"form-label\">Email</label>\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"email\" v-model=\"this.email\"><br>\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                <label for=\"userpassword\" class=\"form-label\">Password</label>\r\n                <input type=\"password\" class=\"form-control\" placeholder=\"password\" v-model=\"this.password\">\r\n                </div>\r\n                <div class=\"mb-3\"></div>\r\n                <button type=\"button\" @click=\"handleLogin\">Login</button>\r\n                <div class=\"alert\">\r\n                <strong>{{this.message}}</strong>\r\n                </div> \r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    \r\n    name: 'login_view',\r\n  data() {\r\n    return {\r\n      email: null,\r\n      password:null,\r\n      message:\"\"\r\n    };\r\n  },\r\n  methods: {\r\n    \r\n    handleLogin() {\r\n    axios\r\n        .post('http://127.0.0.1:5000/api/login', {\r\n            email: this.email,\r\n            password: this.password\r\n        })\r\n        .then(response => {\r\n            console.log(\"response block\", response)\r\n            if (response.status == 201) {\r\n                this.var12 = response.data\r\n                this.email = null\r\n                this.password = null\r\n                this.roles = response.data.roles\r\n                localStorage.setItem('authToken', response.data.authToken)\r\n                localStorage.setItem('roles', response.data.roles)\r\n                localStorage.setItem('user_id', response.data.user_id)\r\n                if (this.roles == 'sponsor'){\r\n                    this.$router.push('/sponsor_home')\r\n                }\r\n                else if (this.roles == 'influencer'){\r\n                    this.$router.push('/influencer_home')\r\n                }\r\n                else {\r\n                    this.$router.push('/admin_home')\r\n                }\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(\"error block\", error)\r\n            if (error.response && error.response.status >= 400) {\r\n                this.message=error.response.data.message\r\n                // Refresh the page after a short delay\r\n                setTimeout(() => {\r\n                location.reload();\r\n                }, 2000);\r\n            }\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n .container {\r\n    display: flex;\r\n    justify-content: center;\r\n }\r\n\r\n .alert {\r\n      padding: 15px;\r\n      color: rgb(246, 21, 21);\r\n    }\r\n</style>"],"mappings":"AAiCA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EAEXC,IAAI,EAAE,YAAY;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,IAAI;MACXC,QAAQ,EAAC,IAAI;MACbC,OAAO,EAAC;IACV,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IAEPC,WAAWA,CAAA,EAAG;MACdP,KAAI,CACCQ,IAAI,CAAC,iCAAiC,EAAE;QACrCL,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBC,QAAQ,EAAE,IAAI,CAACA;MACnB,CAAC,EACAK,IAAI,CAACC,QAAO,IAAK;QACdC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,QAAQ;QACtC,IAAIA,QAAQ,CAACG,MAAK,IAAK,GAAG,EAAE;UACxB,IAAI,CAACC,KAAI,GAAIJ,QAAQ,CAACR,IAAG;UACzB,IAAI,CAACC,KAAI,GAAI,IAAG;UAChB,IAAI,CAACC,QAAO,GAAI,IAAG;UACnB,IAAI,CAACW,KAAI,GAAIL,QAAQ,CAACR,IAAI,CAACa,KAAI;UAC/BC,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEP,QAAQ,CAACR,IAAI,CAACgB,SAAS;UACzDF,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEP,QAAQ,CAACR,IAAI,CAACa,KAAK;UACjDC,YAAY,CAACC,OAAO,CAAC,SAAS,EAAEP,QAAQ,CAACR,IAAI,CAACiB,OAAO;UACrD,IAAI,IAAI,CAACJ,KAAI,IAAK,SAAS,EAAC;YACxB,IAAI,CAACK,OAAO,CAACC,IAAI,CAAC,eAAe;UACrC,OACK,IAAI,IAAI,CAACN,KAAI,IAAK,YAAY,EAAC;YAChC,IAAI,CAACK,OAAO,CAACC,IAAI,CAAC,kBAAkB;UACxC,OACK;YACD,IAAI,CAACD,OAAO,CAACC,IAAI,CAAC,aAAa;UACnC;QACJ;MACJ,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;QACZZ,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEW,KAAK;QAChC,IAAIA,KAAK,CAACb,QAAO,IAAKa,KAAK,CAACb,QAAQ,CAACG,MAAK,IAAK,GAAG,EAAE;UAChD,IAAI,CAACR,OAAO,GAACkB,KAAK,CAACb,QAAQ,CAACR,IAAI,CAACG,OAAM;UACvC;UACAmB,UAAU,CAAC,MAAM;YACjBC,QAAQ,CAACC,MAAM,CAAC,CAAC;UACjB,CAAC,EAAE,IAAI,CAAC;QACZ;MACJ,CAAC;IACL;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}